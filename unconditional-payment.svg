<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2061px" preserveAspectRatio="none" style="width:537px;height:2061px;" version="1.1" viewBox="0 0 537 2061" width="537px" zoomAndPan="magnify"><defs><filter height="300%" id="f7x996jmqv269" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="2046.8203" style="stroke: #A80036; stroke-width: 1.0;" width="302" x="141.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="256.5" y="16.5684">Blockchain</text><rect fill="#FFFFFF" filter="url(#f7x996jmqv269)" height="394.5898" style="stroke: #000000; stroke-width: 2.0;" width="441.5" x="50" y="228.041"/><rect fill="#FFFFFF" filter="url(#f7x996jmqv269)" height="369.6582" style="stroke: #000000; stroke-width: 2.0;" width="508" x="18" y="636.6309"/><rect fill="#FFFFFF" filter="url(#f7x996jmqv269)" height="247.7266" style="stroke: #000000; stroke-width: 2.0;" width="508" x="18" y="1020.2891"/><rect fill="#FFFFFF" filter="url(#f7x996jmqv269)" height="665.3164" style="stroke: #000000; stroke-width: 2.0;" width="479.5" x="12" y="1282.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="86.4883" y2="1964.332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="212.5" x2="212.5" y1="86.4883" y2="1964.332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="389.5" x2="389.5" y1="86.4883" y2="1964.332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="465.5" x2="465.5" y1="86.4883" y2="1964.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="60" y="83.5352">Alice</text><ellipse cx="79.5" cy="13" fill="#FEFECE" filter="url(#f7x996jmqv269)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,21 L79.5,48 M66.5,29 L92.5,29 M79.5,48 L66.5,63 M79.5,48 L92.5,63 " fill="none" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="60" y="1976.8672">Alice</text><ellipse cx="79.5" cy="1989.8203" fill="#FEFECE" filter="url(#f7x996jmqv269)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,1997.8203 L79.5,2024.8203 M66.5,2005.8203 L92.5,2005.8203 M79.5,2024.8203 L66.5,2039.8203 M79.5,2024.8203 L92.5,2039.8203 " fill="none" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f7x996jmqv269)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="145.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="71.5352">Channel Registry</text><rect fill="#FEFECE" filter="url(#f7x996jmqv269)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="145.5" y="1963.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="152.5" y="1983.8672">Channel Registry</text><rect fill="#FEFECE" filter="url(#f7x996jmqv269)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="339.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="346.5" y="71.5352">WETH token</text><rect fill="#FEFECE" filter="url(#f7x996jmqv269)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="339.5" y="1963.332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="346.5" y="1983.8672">WETH token</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="449.5" y="83.5352">Bob</text><ellipse cx="465.5" cy="13" fill="#FEFECE" filter="url(#f7x996jmqv269)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M465.5,21 L465.5,48 M452.5,29 L478.5,29 M465.5,48 L452.5,63 M465.5,48 L478.5,63 " fill="none" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="449.5" y="1976.8672">Bob</text><ellipse cx="465.5" cy="1989.8203" fill="#FEFECE" filter="url(#f7x996jmqv269)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M465.5,1997.8203 L465.5,2024.8203 M452.5,2005.8203 L478.5,2005.8203 M465.5,2024.8203 L452.5,2039.8203 M465.5,2024.8203 L478.5,2039.8203 " fill="none" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M332,101.4883 L332,172.4883 L442,172.4883 L442,111.4883 L432,101.4883 L332,101.4883 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M432,101.4883 L432,111.4883 L442,111.4883 L432,101.4883 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="338" y="119.0566">Balances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="397" y="119.0566">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="346" y="134.3672">50 — Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="346" y="149.6777">80 — Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="346" y="164.9883">0 — Ch. Reg.</text><path d="M147,186.7305 L147,211.7305 L273,211.7305 L273,196.7305 L263,186.7305 L147,186.7305 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M263,186.7305 L263,196.7305 L273,196.7305 L263,186.7305 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="153" y="204.2988">channel count: 0</text><path d="M50,228.041 L190,228.041 L190,235.041 L180,245.041 L50,245.041 L50,228.041 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="394.5898" style="stroke: #000000; stroke-width: 2.0;" width="441.5" x="50" y="228.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="65" y="241.6094">Open channel</text><polygon fill="#A80036" points="200.5,262.6621,210.5,266.6621,200.5,270.6621,204.5,266.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="206.5" y1="266.6621" y2="266.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="86.5" y="261.9199">Open channel</text><path d="M155,279.6621 L155,426.6621 L265,426.6621 L265,289.6621 L255,279.6621 L155,279.6621 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M255,279.6621 L255,289.6621 L265,289.6621 L255,279.6621 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="161" y="297.2305">chID:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="198" y="297.2305">0</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="161" y="312.541">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="169" y="327.8516">0 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="169" y="343.1621">0 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="169" y="358.4727">0 Withdrawal</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="161" y="373.7832">Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="169" y="389.0938">0 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="169" y="404.4043">0 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="169" y="419.7148">0 Withdrawal</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="254.5" y1="503.6992" y2="503.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.5" x2="254.5" y1="503.6992" y2="516.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213.5" x2="254.5" y1="516.6992" y2="516.6992"/><polygon fill="#A80036" points="223.5,512.6992,213.5,516.6992,223.5,520.6992,219.5,516.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="219.5" y="453.0254">LogChannel(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="227.5" y="468.3359">ID: 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="227.5" y="483.6465">left: Alice,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="227.5" y="498.957">right: Bob)</text><path d="M147,529.6992 L147,554.6992 L273,554.6992 L273,539.6992 L263,529.6992 L147,529.6992 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M263,529.6992 L263,539.6992 L273,539.6992 L263,529.6992 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="153" y="547.2676">channel count: 1</text><polygon fill="#A80036" points="90.5,581.3203,80.5,585.3203,90.5,589.3203,86.5,585.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="84.5" x2="211.5" y1="585.3203" y2="585.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="96.5" y="580.5781">Channel ID: 0</text><polygon fill="#A80036" points="453.5,610.6309,463.5,614.6309,453.5,618.6309,457.5,614.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="212.5" x2="459.5" y1="614.6309" y2="614.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="219.5" y="609.8887">Channel ID: 0</text><path d="M18,636.6309 L114,636.6309 L114,643.6309 L104,653.6309 L18,653.6309 L18,636.6309 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="369.6582" style="stroke: #000000; stroke-width: 2.0;" width="508" x="18" y="636.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="33" y="650.1992">Deposit</text><path d="M28,658.9414 L28,698.9414 L126,698.9414 L126,668.9414 L116,658.9414 L28,658.9414 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M116,658.9414 L116,668.9414 L126,668.9414 L116,658.9414 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="34" y="676.5098">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="42" y="691.8203">10 Deposit</text><polygon fill="#A80036" points="200.5,725.873,210.5,729.873,200.5,733.873,204.5,729.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="206.5" y1="729.873" y2="729.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="86.5" y="725.1309">Deposit 10 WETH</text><path d="M161,742.873 L161,782.873 L259,782.873 L259,752.873 L249,742.873 L161,742.873 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M249,742.873 L249,752.873 L259,752.873 L249,742.873 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="167" y="760.4414">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="175" y="775.752">10 Deposit</text><polygon fill="#A80036" points="377.5,825.1152,387.5,829.1152,377.5,833.1152,381.5,829.1152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="383.5" y1="829.1152" y2="829.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="219.5" y="809.0625">transferFrom(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="227.5" y="824.373">Alice, itself, 10 WETH)</text><path d="M328,842.1152 L328,913.1152 L446,913.1152 L446,852.1152 L436,842.1152 L328,842.1152 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M436,842.1152 L436,852.1152 L446,852.1152 L436,842.1152 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="334" y="859.6836">Balances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="393" y="859.6836">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="342" y="874.9941">40 — Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="342" y="890.3047">80 — Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="342" y="905.6152">10 — Ch. Reg.</text><polygon fill="#A80036" points="453.5,939.668,463.5,943.668,453.5,947.668,457.5,943.668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="212.5" x2="459.5" y1="943.668" y2="943.668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="219.5" y="938.9258">Deposit(Alice, chID: 0, 10)</text><path d="M414,956.668 L414,996.668 L512,996.668 L512,966.668 L502,956.668 L414,956.668 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M502,956.668 L502,966.668 L512,966.668 L502,956.668 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="420" y="974.2363">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="428" y="989.5469">10 Deposit</text><path d="M18,1020.2891 L121,1020.2891 L121,1027.2891 L111,1037.2891 L18,1037.2891 L18,1020.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="247.7266" style="stroke: #000000; stroke-width: 2.0;" width="508" x="18" y="1020.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="33" y="1033.8574">Transfer</text><path d="M28,1042.5996 L28,1128.5996 L126,1128.5996 L126,1052.5996 L116,1042.5996 L28,1042.5996 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M116,1042.5996 L116,1052.5996 L126,1052.5996 L116,1042.5996 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="34" y="1060.168">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="42" y="1075.4785">10 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="42" y="1090.7891">-7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="34" y="1106.0996">Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="42" y="1121.4102">7 Credit</text><polygon fill="#A80036" points="453.5,1155.4629,463.5,1159.4629,453.5,1163.4629,457.5,1159.4629" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="459.5" y1="1159.4629" y2="1159.4629"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="86.5" y="1154.7207">send(7, over chID 1)</text><path d="M414,1172.4629 L414,1258.4629 L512,1258.4629 L512,1182.4629 L502,1172.4629 L414,1172.4629 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M502,1172.4629 L502,1182.4629 L512,1182.4629 L502,1172.4629 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="420" y="1190.0313">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="428" y="1205.3418">10 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="428" y="1220.6523">-7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="420" y="1235.9629">Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="428" y="1251.2734">7 Credit</text><path d="M12,1282.0156 L237,1282.0156 L237,1289.0156 L227,1299.0156 L12,1299.0156 L12,1282.0156 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="665.3164" style="stroke: #000000; stroke-width: 2.0;" width="479.5" x="12" y="1282.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="27" y="1295.584">Cooperative Settle by Alice</text><path d="M84,1304.3262 L84,1329.3262 L349,1329.3262 L349,1314.3262 L339,1304.3262 L84,1304.3262 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M339,1304.3262 L339,1314.3262 L349,1314.3262 L339,1304.3262 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="90" y="1321.8945">Balance = Deposit + Credit - Withdraw</text><path d="M22,1343.6367 L22,1444.6367 L132,1444.6367 L132,1353.6367 L122,1343.6367 L22,1343.6367 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M122,1343.6367 L122,1353.6367 L132,1353.6367 L122,1343.6367 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="28" y="1361.2051">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="36" y="1376.5156">-7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="36" y="1391.8262">3 Withdrawal</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="28" y="1407.1367">Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="36" y="1422.4473">7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="36" y="1437.7578">7 Withdrawal</text><polygon fill="#A80036" points="453.5,1471.8105,463.5,1475.8105,453.5,1479.8105,457.5,1475.8105" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="459.5" y1="1475.8105" y2="1475.8105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="86.5" y="1471.0684">send signed channel state</text><polygon fill="#A80036" points="223.5,1501.1211,213.5,1505.1211,223.5,1509.1211,219.5,1505.1211" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="464.5" y1="1505.1211" y2="1505.1211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="229.5" y="1500.3789">update(channel)</text><path d="M155,1518.1211 L155,1650.1211 L265,1650.1211 L265,1528.1211 L255,1518.1211 L155,1518.1211 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M255,1518.1211 L255,1528.1211 L265,1528.1211 L255,1518.1211 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="161" y="1535.6895">Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="169" y="1551">10 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="169" y="1566.3105">-7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="169" y="1581.6211">3 Withdrawal</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="161" y="1596.9316">Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="169" y="1612.2422">0 Deposit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="169" y="1627.5527">7 Credit</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="169" y="1642.8633">7 Withdrawal</text><polygon fill="#A80036" points="200.5,1676.916,210.5,1680.916,200.5,1684.916,204.5,1680.916" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79.5" x2="206.5" y1="1680.916" y2="1680.916"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="86.5" y="1676.1738">Withdraw</text><polygon fill="#A80036" points="377.5,1706.2266,387.5,1710.2266,377.5,1714.2266,381.5,1710.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="383.5" y1="1710.2266" y2="1710.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="219.5" y="1705.4844">transfer 3 WETH to Alice</text><path d="M332,1723.2266 L332,1794.2266 L442,1794.2266 L442,1733.2266 L432,1723.2266 L332,1723.2266 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M432,1723.2266 L432,1733.2266 L442,1733.2266 L432,1723.2266 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="338" y="1740.7949">Balances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="397" y="1740.7949">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="346" y="1756.1055">43 — Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="346" y="1771.416">80 — Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="346" y="1786.7266">7 — Ch. Reg.</text><polygon fill="#A80036" points="223.5,1820.7793,213.5,1824.7793,223.5,1828.7793,219.5,1824.7793" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217.5" x2="464.5" y1="1824.7793" y2="1824.7793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="229.5" y="1820.0371">Withdraw</text><polygon fill="#A80036" points="377.5,1850.0898,387.5,1854.0898,377.5,1858.0898,381.5,1854.0898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212.5" x2="383.5" y1="1854.0898" y2="1854.0898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="219.5" y="1849.3477">transfer 7 WETH to Bob</text><path d="M332,1867.0898 L332,1938.0898 L442,1938.0898 L442,1877.0898 L432,1867.0898 L332,1867.0898 " fill="#FBFB77" filter="url(#f7x996jmqv269)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M432,1867.0898 L432,1877.0898 L442,1877.0898 L432,1867.0898 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="338" y="1884.6582">Balances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="397" y="1884.6582">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="346" y="1899.9688">43 — Alice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="346" y="1915.2793">87 — Bob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="346" y="1930.5898">0 — Ch. Reg.</text><!--
@startuml
actor Alice as A

box "Blockchain" #lightblue
    participant "Channel Registry" as reg
    participant "WETH token" as weth
end box

actor Bob as B

note over weth
    **Balances**:
      50 — Alice
      80 — Bob
      0 — Ch. Reg.
end note

note over reg
    channel count: 0
end note


group Open channel
    A -> reg: Open channel

    note over reg
        **chID:** 0
        **Alice**
          0 Deposit
          0 Credit
          0 Withdrawal
        **Bob**
          0 Deposit
          0 Credit
          0 Withdrawal
    end note

    reg -> reg: LogChannel(\n  ID: 0,\n  left: Alice,\n  right: Bob)

    note over reg: channel count: 1

    reg - -> A: Channel ID: 0
    reg - -> B: Channel ID: 0
end

group Deposit
    note over A
        **Alice**
          10 Deposit
    end note

    A -> reg: Deposit 10 WETH

    note over reg
        **Alice**
          10 Deposit
    end note

    reg -> weth: transferFrom(\n  Alice, itself, 10 WETH)

    note over weth
        **Balances**:
          40 — Alice
          80 — Bob
          10 — Ch. Reg.
    end note

    reg - -> B: Deposit(Alice, chID: 0, 10)

    note over B
        **Alice**
          10 Deposit
    end note
end

group Transfer
    note over A
        **Alice**
          10 Deposit
          -7 Credit
        **Bob**
          7 Credit
    end note

    A -> B: send(7, over chID 1)

    note over B
        **Alice**
          10 Deposit
          -7 Credit
        **Bob**
          7 Credit
    end note
end

group Cooperative Settle by Alice
    note right A: Balance = Deposit + Credit - Withdraw

    note over A
        **Alice**
          -7 Credit
          3 Withdrawal
        **Bob**
          7 Credit
          7 Withdrawal
    end note

    A -> B: send signed channel state
    B -> reg: update(channel)

    note over reg
        **Alice**
          10 Deposit
          -7 Credit
          3 Withdrawal
        **Bob**
          0 Deposit
          7 Credit
          7 Withdrawal
    end note


    A -> reg: Withdraw
    reg -> weth: transfer 3 WETH to Alice
    note over weth
        **Balances**:
          43 — Alice
          80 — Bob
          7 — Ch. Reg.
    end note

    B -> reg: Withdraw
    reg -> weth: transfer 7 WETH to Bob

    note over weth
        **Balances**:
          43 — Alice
          87 — Bob
          0 — Ch. Reg.
    end note
end

@enduml

PlantUML version 1.2018.06(Mon May 21 18:34:53 HKT 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.1+11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: HK
--></g></svg>